# ===========================================================
#       ğŸ³ ğŸ³ ğŸ³ ğŸ³ ğŸ³ DOCKER COMPOSE DEV ğŸ³ ğŸ³ ğŸ³ ğŸ³ ğŸ³
# ===========================================================
# docker-compose up:    docker-compose -f docker-compose-sonar-qube.yml up
# docker-compose logs:  docker-compose -f docker-compose-sonar-qube.yml logs -f
# docker-compose down:  docker-compose -f docker-compose-sonar-qube.yml down --rmi all --remove-orphans
#                       // Deletes all images - JUST MAKE SURE VOLUMES WON'T BE DELETED
#
# Following command is used to scan a given project with SonarScanner
#  docker run \
#  --rm \
#  -v "$(pwd):/usr/src" \
#  --network="host" \
#  -e SONAR_HOST_URL="http://localhost:9000" \
#  -e SONAR_SCANNER_OPTS="-Dsonar.projectKey=test-first-mandatory -Dsonar.sources=./ -Dsonar.test=test -Dsonar.javascript.lcov.reportPaths=test/coverage/lcov.info" \
#  -e SONAR_TOKEN="${SONAR_TOKEN}" \
#  sonarsource/sonar-scanner-cli

services:
  sonarqube:
    image: sonarqube:10.6-community
    container_name: sonar-test
    ports:
      - "9000:9000"
    volumes:
      - sonarqube_data_test_man1:/opt/sonarqube/data
      - sonarqube_logs_test_man1:/opt/sonarqube/logs
      - sonarqube_extensions_test_man1:/opt/sonarqube/extensions
    restart: unless-stopped

volumes:
  sonarqube_data_test_man1:
  sonarqube_logs_test_man1:
  sonarqube_extensions_test_man1:
